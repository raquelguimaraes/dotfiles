export LSCOLORS=dxfxcxdxbxegedabagacad

function __prompt_command() {
  local EXIT="$?"

  local BLUE="\[\e[01;36m\]"
  local YELLOW="\[\e[33;1m\]"
  local RED="\e[01;31m"
  local GREEN="\[\e[01;32m\]"
  local RESET="\[\e[0m\]"

  PS1="\n$BLUE[\T] $YELLOW\w$RESET"

  if [[ -n $(git branch 2> /dev/null) ]]; then
    if [[ $(git status 2> /dev/null | tail -n1 | cut -c 1-17) != "nothing to commit" ]]; then
      PS1+=" ${RED}✗${RESET}"
    else
      PS1+=" ${GREEN}✔${RESET}"
    fi
  fi

  PS1+="\n"

  if [ $EXIT != 0 ]; then
    PS1+="${RED}\$ ${RESET}"      # Add red if exit code non 0
  else
    PS1+="\$ ${RESET}"
  fi
}

export PROMPT_COMMAND=__prompt_command
